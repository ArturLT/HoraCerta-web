<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Cadastro{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2563eb',
                        secondary: '#64748b',
                        accent: '#0ea5e9',
                        background: '#f8fafc',
                        surface: '#ffffff',
                        border: '#e2e8f0',
                    }
                }
            }
        }
    </script>
</head>
{% load static %}



{% block extra_style %}
<link rel="stylesheet" href="{% static 'accounts/css/cadastro.css' %}">
{% endblock %}

{% block content %}
<div class="cadastro-page-wrapper">
    <div class="cadastro-container">
          
        <div class="cadastro-header">
            <h1>Criar Conta</h1>
            <p>Preencha os dados para começar</p>
        </div>

          
        <div class="cadastro-form">
            {% if messages %}
            <div class="messages">
                {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">
                    {{ message }}
                </div>
                {% endfor %}
            </div>
            {% endif %}

            <form action="{% url 'accounts:cadastro' %}" method="POST" id="cadastroForm">
                {% csrf_token %}
                
                  
                <div class="form-group">
                    <label for="nome">
                        Nome Completo <span class="required">*</span>
                    </label>
                    <div class="input-wrapper">
                        <input 
                            type="text" 
                            id="nome"
                            name="nome" 
                            class="form-control" 
                            placeholder="Digite seu nome completo"
                            required
                        >
                        <svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                        </svg>
                    </div>
                    <span class="error-message">Por favor, insira seu nome completo</span>
                </div>

                <div class="form-group">
                    <label for="email">
                        E-mail <span class="required">*</span>
                    </label>
                    <div class="input-wrapper">
                        <input 
                            type="email" 
                            id="email"
                            name="email" 
                            class="form-control" 
                            placeholder="seu@email.com"
                            required
                        >
                        <svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                        </svg>
                    </div>
                    <span class="error-message">Por favor, insira um e-mail válido</span>
                </div>

                <div class="form-group">
                    <label for="nome_empresa">
                        Nome da Empresa <span class="optional">(opcional)</span>
                    </label>
                    <div class="input-wrapper">
                        <input 
                            type="text" 
                            id="nome_empresa"
                            name="nome_empresa" 
                            class="form-control" 
                            placeholder="Nome da sua empresa"
                        >
                        <svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                        </svg>
                    </div>
                </div>

                  
                <div class="form-group">
                    <label for="senha">
                        Senha <span class="required">*</span>
                    </label>
                    <div class="input-wrapper">
                        <input 
                            type="password" 
                            id="senha"
                            name="senha" 
                            class="form-control" 
                            placeholder="Mínimo 6 caracteres"
                            required
                            minlength="6"
                        >
                        <svg class="input-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                        </svg>
                    </div>
                    <span class="error-message">A senha deve ter no mínimo 6 caracteres</span>
                    
                    <div class="password-strength" id="passwordStrength">
                        <div class="strength-bar">
                            <div class="strength-fill" id="strengthFill"></div>
                        </div>
                        <span class="strength-text" id="strengthText"></span>
                    </div>
                </div>

                <button type="submit" class="btn-submit">
                    Criar Conta
                </button>
            </form>
        </div>

        <div class="login-link">
            <p>
                Já tem uma conta? 
                <a href="{% url 'accounts:login' %}">Faça Login</a>
            </p>
        </div>
    </div>
</div>

<footer class="bg-surface border-t border-border mt-auto">
            <div class="px-8 py-6">
                <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                    <p class="text-sm text-gray-600">
                        &copy; 2025 Hora Certa. Todos os direitos reservados.
                    </p>
                    <div class="flex items-center gap-6 text-sm text-gray-600">
                        <a href="#" class="hover:text-primary transition-colors">Termos de Uso</a>
                        <a href="#" class="hover:text-primary transition-colors">Privacidade</a>
                        <a href="#" class="hover:text-primary transition-colors">Suporte</a>
                    </div>
                </div>
            </div>
        </footer>
    </div>
{% endblock %}

{% block extra_scripts %}
<script>
// Validação de formulário e indicador de força de senha
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('cadastroForm');
    const senhaInput = document.getElementById('senha');
    const passwordStrength = document.getElementById('passwordStrength');
    const strengthFill = document.getElementById('strengthFill');
    const strengthText = document.getElementById('strengthText');
    
    // Validação em tempo real
    const inputs = form.querySelectorAll('.form-control[required]');
    inputs.forEach(input => {
        input.addEventListener('blur', function() {
            validateInput(this);
        });
        
        input.addEventListener('input', function() {
            if (this.classList.contains('error')) {
                validateInput(this);
            }
        });
    });
    
    // Indicador de força da senha
    senhaInput.addEventListener('input', function() {
        const password = this.value;
        
        if (password.length === 0) {
            passwordStrength.classList.remove('show');
            return;
        }
        
        passwordStrength.classList.add('show');
        
        let strength = 0;
        if (password.length >= 6) strength++;
        if (password.length >= 10) strength++;
        if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength++;
        if (/\d/.test(password)) strength++;
        if (/[^a-zA-Z\d]/.test(password)) strength++;
        
        strengthFill.className = 'strength-fill';
        
        if (strength <= 2) {
            strengthFill.classList.add('weak');
            strengthText.textContent = 'Senha fraca';
        } else if (strength <= 3) {
            strengthFill.classList.add('medium');
            strengthText.textContent = 'Senha média';
        } else {
            strengthFill.classList.add('strong');
            strengthText.textContent = 'Senha forte';
        }
    });
    
    // Validação no submit
    form.addEventListener('submit', function(e) {
        let isValid = true;
        
        inputs.forEach(input => {
            if (!validateInput(input)) {
                isValid = false;
            }
        });
        
        if (!isValid) {
            e.preventDefault();
        } else {
            // Adiciona estado de loading no botão
            const submitBtn = form.querySelector('.btn-submit');
            submitBtn.classList.add('loading');
            submitBtn.disabled = true;
        }
    });
    
    function validateInput(input) {
        const value = input.value.trim();
        
        if (input.hasAttribute('required') && value === '') {
            input.classList.add('error');
            input.classList.remove('valid');
            return false;
        }
        
        if (input.type === 'email' && value !== '') {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(value)) {
                input.classList.add('error');
                input.classList.remove('valid');
                return false;
            }
        }
        
        if (input.id === 'senha' && value.length < 6) {
            input.classList.add('error');
            input.classList.remove('valid');
            return false;
        }
        
        input.classList.remove('error');
        input.classList.add('valid');
        return true;
    }
});
</script>
{% endblock %}
